{% extends 'cadastro/layout.html' %}
{% block title %}Editar Sócio{% endblock title %}

{% block body %}
<h2>Editar Sócio</h2>
<form action="{% url 'cadastro:editar_socio' socio.id %}" method="post" class="needs-validation" novalidate>
  {% csrf_token %}

  <div class="form-row">
    <div class="col-md-6 mb-3">
      <label>Nome</label>
      <input name="nome" type="text" class="form-control" required
             value="{{ socio.nome }}">
      <div class="invalid-feedback">Insira o nome.</div>
    </div>
    <div class="col-md-2 mb-3">
      <label>Cargo</label>
      <input name="cargo" type="text" class="form-control" required
             value="{{ trabalho.cargo|default_if_none:'' }}">
      <div class="invalid-feedback">Insira o cargo.</div>
    </div>
    <div class="col-md-2 mb-3">
      <label>Lotação</label>
      <input name="lotacao" type="text" class="form-control" required
             value="{{ trabalho.lotacao.socio_lotacao|default_if_none:'' }}">
      <div class="invalid-feedback">Insira a lotação.</div>
    </div>
    <div class="col-md-2 mb-3">
      <label>Secretaria</label>
      <input name="secretaria" type="text" class="form-control" required
             value="{{ trabalho.lotacao.secretaria|default_if_none:'' }}">
      <div class="invalid-feedback">Insira a secretaria.</div>
    </div>
  </div>

  <div class="form-row">
    <div class="col-md-2 mb-3">
      <label>Matrícula</label>
      <input name="matricula" type="text" class="form-control" required
             value="{{ socio.matricula }}">
      <div class="invalid-feedback">Insira a matrícula.</div>
    </div>
    <div class="col-md-2 mb-3">
      <label>Data Admissão</label>
      <input name="data_admissao" type="date" class="form-control" required
             value="{{ trabalho.data_admissao|date:'Y-m-d' }}">
      <div class="invalid-feedback">Insira a data.</div>
    </div>
    <div class="col-md-2 mb-3">
      <label>Data Associação</label>
      <input name="data_socio" type="date" class="form-control" required
             value="{{ socio.data_socio|date:'Y-m-d' }}">
      <div class="invalid-feedback">Insira a data.</div>
    </div>
    <div class="col-md-3 mb-3">
      <label>Rua/Av</label>
      <input name="rua" type="text" class="form-control" required
             value="{{ endereco.rua|default_if_none:'' }}">
      <div class="invalid-feedback">Insira a rua.</div>
    </div>
    <div class="col-md-1 mb-3">
      <label>N°</label>
      <input name="numero" type="text" class="form-control" required
             value="{{ endereco.numero|default_if_none:'' }}">
      <div class="invalid-feedback">Insira o número.</div>
    </div>
    <div class="col-md-2 mb-3">
      <label>Bairro</label>
      <input name="bairro" type="text" class="form-control" required
             value="{{ endereco.bairro|default_if_none:'' }}">
      <div class="invalid-feedback">Insira o bairro.</div>
    </div>
  </div>

  <div class="form-row">
    <div class="col-md-3 mb-3">
      <label>UF</label>
      <select name="uf" class="form-control">
        {% for uf in state_list %}
          <option value="{{ uf }}" {% if endereco and endereco.uf == uf %}selected{% endif %}>{{ uf }}</option>
        {% endfor %}
      </select>
      
      <div class="invalid-feedback">Insira o UF.</div>
    </div>
    <div class="col-md-6 mb-3">
      <label>Cidade</label>
      <input name="cidade" type="text" class="form-control" required
             value="{{ endereco.cidade|default_if_none:'' }}">
      <div class="invalid-feedback">Insira a cidade.</div>
    </div>
    <div class="col-md-3 mb-3">
      <label>CEP</label>
      <input name="cep" type="text" class="form-control" required
             value="{{ endereco.cep|default_if_none:'' }}"
             pattern="\d{5}-\d{3}" placeholder="XXXXX-XXX">
      <div class="invalid-feedback">Insira o CEP.</div>
    </div>
  </div>

  <div class="form-row">
    <div class="col-md-2 mb-3">
      <label>Data Nasc.</label>
      <input name="data_nasc" type="date" class="form-control" required
             value="{{ socio.data_nasc|date:'Y-m-d' }}">
      <div class="invalid-feedback">Insira a data de nascimento.</div>
    </div>
    <div class="col-md-2 mb-3">
      <label>RG</label>
      <input name="rg" type="text" class="form-control" required
             value="{{ socio.rg }}">
      <div class="invalid-feedback">Insira o RG.</div>
    </div>
    <div class="col-md-2 mb-3">
      <label>CPF</label>
      <input name="cpf" type="text" class="form-control" required
             value="{{ socio.cpf }}"
             pattern="\d{3}\.\d{3}\.\d{3}-\d{2}">
      <div class="invalid-feedback">Insira o CPF.</div>
    </div>
    <div class="col-md-2 mb-3">
      <label>Telefone</label>
      <input name="telefone" type="text" class="form-control" required
             value="{{ socio.telefone }}"
             pattern="\d{2} \d{5}-\d{4}">
      <div class="invalid-feedback">Insira o telefone.</div>
    </div>
    <div class="col-md-4 mb-3">
      <label>Email</label>
      <input name="email" type="email" class="form-control" required
             value="{{ socio.email }}">
      <div class="invalid-feedback">Insira o email.</div>
    </div>
  </div>

  <div class="form-row">
    {% for i in "1234" %}
        <div class="col-md-6 mb-3">
            <label for="dependente{{ i }}">Dependente</label>
            <input name="dependente{{ i }}" type="text" class="form-control" id="dependente{{ i }}" placeholder="Nome completo do dependente (opcional)">
        </div>
    {% endfor %}
  </div>

  <button class="btn btn-success">Salvar</button>
  <a href="{% url 'cadastro:ver_socio' socio.id %}" class="btn btn-secondary ml-2">
    Cancelar
  </a>
</form>
{% endblock %}
